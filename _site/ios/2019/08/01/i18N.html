<!DOCTYPE html>
<html lang="en-US">
  <head>

    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>iOS å›½é™…åŒ– å’Œ å¤šè¯­è¨€ | Feierbn</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="iOS å›½é™…åŒ– å’Œ å¤šè¯­è¨€" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="å¤šè¯­è¨€ä»…ä»…åªæ˜¯å›½é™…åŒ–ä¸€ä¸ªå°æ–¹é¢" />
<meta property="og:description" content="å¤šè¯­è¨€ä»…ä»…åªæ˜¯å›½é™…åŒ–ä¸€ä¸ªå°æ–¹é¢" />
<link rel="canonical" href="http://localhost:4000/ios/2019/08/01/i18N.html" />
<meta property="og:url" content="http://localhost:4000/ios/2019/08/01/i18N.html" />
<meta property="og:site_name" content="Feierbn" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-08-01T00:00:00+08:00" />
<script type="application/ld+json">
{"url":"http://localhost:4000/ios/2019/08/01/i18N.html","headline":"iOS å›½é™…åŒ– å’Œ å¤šè¯­è¨€","dateModified":"2019-08-01T00:00:00+08:00","datePublished":"2019-08-01T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/ios/2019/08/01/i18N.html"},"description":"å¤šè¯­è¨€ä»…ä»…åªæ˜¯å›½é™…åŒ–ä¸€ä¸ªå°æ–¹é¢","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=">
  </head>
  <body>
  	<a class="back-to-home" href="/"><< Home</a>
  
    <header class="page-header2" role="banner">
      <h1 class="project-name">iOS å›½é™…åŒ– å’Œ å¤šè¯­è¨€</h1>
      <h2 class="project-tagline">å¤šè¯­è¨€ä»…ä»…åªæ˜¯å›½é™…åŒ–ä¸€ä¸ªå°æ–¹é¢</h2>
      
    </header>

    <main id="content" class="main-content" role="main">
      <p>æœ€è¿‘å…¬å¸çš„é¡¹ç›®è¦æ±‚é€‚é…å›½é™…åŒ–ï¼Œåœ¨è¿‡ç¨‹ä¸­é‡åˆ°æŒºå¤šæœ‰æ„æ€çš„çŸ¥è¯†ç‚¹ã€‚</p>

<p>å¤šè¯­è¨€å¤§å®¶éƒ½çŸ¥é“ï¼Œå­—æ¯æ–‡å­—æœ‰æ˜¾è‘—çš„å½¢çŠ¶å·®åˆ«ã€‚</p>

<p>ä½†å›½é™…åŒ–å¹¶ä¸ä»…ä»…åªåŒ…å«å¤šè¯­è¨€ï¼Œå®ƒè¿˜æœ‰ä¸åŒè¯­è¨€çš„è¡¨è¾¾æ–¹å¼å’Œä½¿ç”¨ä¹ æƒ¯çš„å·®å¼‚ã€‚</p>

<p>ä¸€èˆ¬å¤§å®¶æŠŠå¤šè¯­è¨€å«åšMultilingualizationï¼Œå³M17Nã€‚
å›½é™…åŒ–å«åšInternationalizationï¼Œå³i18nã€‚</p>

<h2 id="æµ‹è¯•ç¯å¢ƒ">æµ‹è¯•ç¯å¢ƒ</h2>

<p>Xcode: 10.1</p>

<h2 id="è¯­è¨€çš„ç‰¹æ€§å’Œå·®å¼‚">è¯­è¨€çš„ç‰¹æ€§å’Œå·®å¼‚</h2>

<p>å­¦è¿‡è‹±è¯­çš„ï¼Œåº”è¯¥éƒ½çŸ¥é“ä¸­æ–‡å’Œè‹±æ–‡åœ¨æ–‡å­—ã€è¯­æ³•ã€ç‰¹å®šè¡¨è¾¾æœ‰å¾ˆå¤§åŒºåˆ«ã€‚</p>

<p>å¯¹äºæˆ‘ä»¬ä¸äº†è§£çš„å…¶å®ƒè¯­ç§ï¼Œä¹Ÿå­˜åœ¨è®¸å¤šå·®å¼‚åŒ–çš„åœ°æ–¹ã€‚</p>

<h4 id="ä¸€è¯­åºè¯­ä¹‰å’Œè¯­æ³•">ä¸€ã€è¯­åºã€è¯­ä¹‰å’Œè¯­æ³•</h4>

<p>æ‹¿è‹±æ–‡æ¥è¯´ï¼ŒåŒä¸€ä¸ªå•è¯å¯ä»¥æœ‰2ç§è¡¨è¾¾æ„æ€ã€‚</p>

<p>å¯¹äºå½“ã€Œå¤©ã€ä½¿ç”¨çš„æƒ…å†µï¼Œã€Œ5 dayã€å’Œã€Œ5å¤©ã€çš„è¡¨è¾¾ä¹ æƒ¯æ˜¯ä¸€è‡´çš„ã€‚</p>

<p>ä½†å¦‚æœæ˜¯å½“ã€Œç¬¬Xå¤©ã€ä½¿ç”¨çš„æƒ…å†µï¼Œã€ŒDay 5ã€å’Œã€Œå¤©5ã€å°±æ— æ³•åŒ¹é…äº†ã€‚</p>

<p>æ‰€ä»¥è¿™é‡Œéœ€è¦è€ƒè™‘ç”¨2ä¸ª keyã€‚è‹±æ–‡å†™æˆã€ŒDay %ldã€å’Œ ä¸­æ–‡å†™æˆã€Œç¬¬%ldå¤©ã€ã€‚</p>

<h4 id="äºŒå¤§å°å†™">äºŒã€å¤§å°å†™</h4>

<p>å¯¹äºè‹±æ–‡ï¼ŒåŒä¸€ä¸ªè‹±æ–‡å•è¯ä¼šæœ‰å°å†™ã€é¦–å­—æ¯å¤§å†™ã€å…¨å¤§å†™çš„æ˜¾ç¤ºè¦æ±‚ã€‚</p>

<p>ä¸éœ€è¦ä½¿ç”¨å¤šä¸ªkeyï¼Œå¦åˆ™ä½ çš„è¯­è¨€åŒ…ä¸ä»…å¤§ï¼Œè€Œä¸”ç®¡ç†æœ‰ä¼šå˜æ··ä¹±ã€‚</p>

<p>åº”è¯¥è€ƒè™‘ç»Ÿä¸€ä½¿ç”¨å°å†™ï¼Œä½¿ç”¨ç³»ç»Ÿæä¾›çš„ String åº“çš„åŠŸèƒ½æ¥å¤„ç†ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[@"test" capitalizedString];
[@"test" uppercaseString];
</code></pre></div></div>

<h4 id="ä¸‰å•å¤æ•°">ä¸‰ã€å•å¤æ•°</h4>

<p>ä¸­æ–‡ä½¿ç”¨è€…æ²¡æœ‰è¿™ç§å›°æ‰°ã€‚ä½†è‹±æ–‡ä½¿ç”¨è€…æœ‰1å’Œå…¶å®ƒæœ‰å•å¤æ•°å·®åˆ«ï¼Œå…¶å®ƒå›½å®¶å¯èƒ½å•å¤æ•°æœ‰1ã€2ã€10çš„å€æ•°ç­‰è¡¨è¾¾å·®åˆ«ã€‚</p>

<p>è¢«æ€»ç»“å‡ºæ¥å³ï¼šzeroã€oneã€twoã€fewã€manyã€otherï¼Œè¯¦æƒ…çœ‹æ–‡ç« æœ«å°¾çš„ Language Plural Rules å‚è€ƒæ–‡æ¡£ã€‚</p>

<h4 id="å››æ•°å­—">å››ã€æ•°å­—</h4>

<p>åˆ†éš”ä½çš„ä¸åŒï¼Œæ ‡ç‚¹å­—ç¬¦ä½¿ç”¨çš„ä¸åŒï¼Œéƒ½æ˜¯æ•°å­—è¡¨è¾¾çš„å·®å¼‚æ€§ã€‚ä¾‹å¦‚ï¼š</p>

<p>ä¸­æ–‡ï¼š1000.01</p>

<p>è‹±æ–‡ï¼š1,000.01</p>

<p>å¾·è¯­ï¼š 1.000,01</p>

<p>å°åœ°è¯­ï¼šà¥§,à¥¦à¥¦à¥¦.à¥¦à¥§</p>

<h4 id="äº”æ—¥æœŸ">äº”ã€æ—¥æœŸ</h4>

<p>æ—¥æœŸå¹´æœˆæ—¥è¡¨è¾¾é¡ºåºå’Œåˆ†éš”ç¬¦ï¼Œä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„å·®å¼‚ç‚¹ã€‚ä¾‹å¦‚ï¼š</p>

<p>ä¸­æ–‡ï¼š2019å¹´1æœˆ1æ—¥</p>

<p>è‹±æ–‡ï¼šJanuary 1, 2019</p>

<p>å°åœ°è¯­ï¼šà¥§ à¤œà¤¨à¤µà¤°à¥€ à¥¨à¥¦à¥§à¥¯</p>

<h4 id="å…­æ—¥å†">å…­ã€æ—¥å†</h4>

<p>iOS ç³»ç»Ÿæä¾›äº†3ç§æ—¥å†ã€‚å¦‚æœ app å†…æœ‰éœ€è¦å¤„ç†æ—¥å†ç›¸å…³çš„éœ€æ±‚ï¼Œé‚£ä¹ˆè¿™é‡Œéœ€è¦åšä¸€äº›é€‚é…å·¥ä½œã€‚</p>

<p>å¯¹äºä¸­æ–‡ä½¿ç”¨è€…ï¼š</p>

<p>å…¬å†ï¼š2019å¹´1æœˆ1æ—¥</p>

<p>æ—¥æœ¬è¯­ï¼šå¹³æˆ31å¹´1æœˆ1æ—¥</p>

<p>ä½›å†ï¼šä½›å†2562å¹´1æœˆ1æ—¥</p>

<p><img src="/_img/20190801/calendar.png" alt="calendar.png" /></p>

<h4 id="ä¸ƒrtl">ä¸ƒã€RTL</h4>

<p>å¯¹äºå¦‚é˜¿æ‹‰ä¼¯è¯­ï¼Œå®ƒçš„é˜…è¯»æ–¹å‘å’Œå¤§éƒ¨åˆ†å›½å®¶ç›¸åã€‚</p>

<p>æˆ‘ä»¬æ˜¯ Left-to-Rightï¼ˆä»å·¦åˆ°å³ï¼‰ï¼Œå®ƒä»¬æ˜¯ Right-to-Leftï¼ˆä»å³åˆ°å·¦ï¼‰ï¼Œå¸¸è¯´çš„ RTL é€‚é…å°±æ˜¯è¯´çš„è¿™ç§è¯­è¨€ã€‚</p>

<p>åšè¿‡å¸ƒå±€çš„å¤§å®¶éƒ½çŸ¥é“ Masonry çš„ left å’Œ leadingã€right å’Œ trailingï¼ŒåŒºåˆ«å°±åœ¨è¿™ç§è¯­è¨€å›½å®¶å¾—åˆ°ä½“ç°ã€‚å¯¹äºä¸­å›½ï¼Œleading å’Œ trailing å®Œå…¨ç­‰åŒäº left å’Œ rightï¼Œä½†å¯¹äºé˜¿æ‹‰ä¼¯è¯­çš„ä½¿ç”¨è€…æ¥è¯´ï¼Œleading = rightã€trailing = leftã€‚ç±»ä¼¼ UICollectionView çš„å¸ƒå±€ï¼Œä¹Ÿä¸æˆ‘ä»¬æƒ³è±¡çš„ä¸åŒã€‚</p>

<p>ä¸­æ–‡ä½¿ç”¨è€…9å®«æ ¼é¡ºåº</p>

<p>1 2 3</p>

<p>4 5 6</p>

<p>7 8 9</p>

<p>é˜¿æ‹‰ä¼¯è¯­ä½¿ç”¨è€…9å®«æ ¼é¡ºåº</p>

<p>3 2 1</p>

<p>6 5 4</p>

<p>9 8 7</p>

<h4 id="å…«æ’åº">å…«ã€æ’åº</h4>
<p>ä¸åŒå›½å®¶çš„æ’åºè§„åˆ™ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œé‡éŸ³ç¬¦å·ã€æŸäº›ç¬¦å·çš„å‡ºç°éƒ½ä¼šåŠ å¤§æ’åºæƒé‡ã€‚</p>

<p>ä½ å°†ä½ çš„æ‰‹æœºåˆ‡æ¢åœ¨æ—¥æ–‡ï¼Œæ‰“å¼€é€šè®¯å½•å³èƒ½çœ‹åˆ°æ˜æ˜¾çš„åŒºåˆ«ã€‚</p>

<h4 id="ä¹é”®ç›˜">ä¹ã€é”®ç›˜</h4>

<p>ä¸åŒè¯­è¨€çš„é”®ç›˜çš„ä¸åŒï¼Œå¯èƒ½ä¼šå¯¼è‡´ä½ çš„æ­£åˆ™åŒ¹é…å¤±æ•ˆç­‰ã€‚</p>

<p>é”®ç›˜ä¸Šçš„å­—ç¬¦å¹¶ä¸æ˜¯å›ºå®šæ¯ä¸ªè¯­è¨€éƒ½å‡ºç°ï¼Œæœ‰äº›è¯­ç§å¯èƒ½ä¼šç¼ºå¤±ä½ å¸¸ç”¨çš„è¯­è¨€ä¸‹çš„è¾“å…¥æŒ‰é”®ã€‚</p>

<p><img src="/_img/20190801/keyboard.png" alt="é”®ç›˜" /></p>

<h4 id="ååº¦é‡è¡¡">åã€åº¦é‡è¡¡</h4>

<p>åƒå…‹å’Œç£…ã€æ‘„æ°åº¦å’Œåæ°åº¦ï¼Œè¿™äº›å•ä½çš„äº’è½¬å¯èƒ½ä¼šå¯¼è‡´ç²¾åº¦ç¼ºå¤±ã€‚è¿™ä¹Ÿæ˜¯å®é™…ç”¨åˆ°éœ€è¦è€ƒè™‘çš„é—®é¢˜ã€‚</p>

<h2 id="å›½é™…åŒ–å®è·µç®€ç•¥ä¸è¯¦ç»†">å›½é™…åŒ–å®è·µï¼ˆç®€ç•¥ï¼Œä¸è¯¦ç»†ï¼‰</h2>

<p>ä¸€èˆ¬æ­¥éª¤æ˜¯ï¼š</p>

<ol>
  <li>
    <p>é€‰å®šé¡¹ç›®éœ€è¦æ”¯æŒçš„è¯­ç§</p>
  </li>
  <li>
    <p>å¢åŠ è¯­è¨€æ˜ å°„è¡¨ Strings Fileã€‚</p>
  </li>
  <li>
    <p>ä»£ç ä¸­è°ƒç”¨</p>
  </li>
</ol>

<h4 id="ä¸€ç®¡ç†é¡¹ç›®è¯­ç§">ä¸€ã€ç®¡ç†é¡¹ç›®è¯­ç§</h4>

<p>Target - PROJECT - Localizations å°±æ˜¯ç®¡ç†æˆ‘ä»¬ç¨‹åºæ”¯æŒè¯­ç§çš„åœ°æ–¹ã€‚</p>

<p><img src="/_img/20190801/language.png" alt="language.png" /></p>

<h4 id="äºŒå¡«å†™è¯­è¨€æ˜ å°„æ–‡ä»¶">äºŒã€å¡«å†™è¯­è¨€æ˜ å°„æ–‡ä»¶</h4>

<p>å»ºç«‹æ–°å»ºä¸€ä¸ªåå« <code class="highlighter-rouge">Localizable.strings</code> çš„ Strings æ–‡ä»¶</p>

<p>åæœŸæ¯åœ¨ Localizations å¢åŠ çš„è¯­è¨€ï¼Œéƒ½å¯ä»¥åœ¨æ–‡ä»¶å³è¾¹ inspector å‹¾é€‰è¯­è¨€é€‚é…ã€‚</p>

<p>æ–‡ä»¶é‡Œçš„å†…å®¹å¯ä»¥ä¸ºä»»æ„æ ¼å¼ï¼Œå·¦è¾¹ä¸ºkeyï¼Œå³è¾¹ä¸ºæ˜¾ç¤ºçš„æ–‡å­—ï¼Œç”¨åˆ†å·ç»“å°¾</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"lg_days" = "%ld days";
"key.test" = "i'm value";
"ğŸ˜‚" = "cry";
</code></pre></div></div>

<p><img src="/_img/20190801/inspector.png" alt="inspector.png" /></p>

<h4 id="ä¸‰ç”¨æ³•">ä¸‰ã€ç”¨æ³•</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>æ— æ ¼å¼åŒ–çš„
NSString *str = NSLocalizedString(@"key.test", @"æˆ‘æ˜¯æ³¨é‡Š");
// print i'm value

å¸¦æ ¼å¼åŒ–çš„
NSString *str2 = [NSString localizedStringWithFormat:NSLocalizedString(@"lg_days", nil), 1];
// print 1 day
</code></pre></div></div>

<h4 id="å››infopliststrings">å››ã€InfoPlist.strings</h4>

<p>æˆ‘ä»¬çš„é¡¹ç›®å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°è¿™ä¸ªã€‚</p>

<p>å®ƒå¯ä»¥å®šä¹‰æ›¿æ¢æ‰é¡¹ç›® info.plist ç›¸å…³çš„ä¸€äº›å†…å®¹ã€‚æ¯”å¦‚ app iconã€app name ç­‰ã€‚ä½†è¦æ±‚æ˜¯ï¼Œåå­—å¿…é¡»æ˜¯ <code class="highlighter-rouge">InfoPlist.strings</code></p>

<p>ä½†å®ƒæœ‰ä¸ªé™åˆ¶ï¼Œå®ƒæ˜¯è·Ÿéšç³»ç»Ÿè¯­è¨€ï¼Œå³ä½ ä»£ç ä¿®æ”¹ç¨‹åºè¯­è¨€<code class="highlighter-rouge">AppleLanguages</code>å¹¶ä¸èµ·ä½œç”¨ã€‚</p>

<p>æ³¨æ„ï¼Œå³ä½¿ä½ åœ¨ InfoPlist.strings å¡«äº†ç›¸åº”çš„æƒé™æ–‡æ¡ˆï¼Œinfo.plist é‡Œè¿˜æ˜¯éœ€è¦å¡«ä¸€æ¬¡ï¼Œå¦åˆ™ä¼šæ³•ä¸Šä¼  ipa åŒ…ã€‚</p>

<h4 id="äº”ç”¨ä»£ç ä¿®æ”¹-app-è¯­è¨€">äº”ã€ç”¨ä»£ç ä¿®æ”¹ app è¯­è¨€</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults setValue:@[@"en"] forKey:@"AppleLanguages"];
[userDefaults synchronize];
</code></pre></div></div>

<p>valueçš„å€¼ä¸ä½ å»ºçš„è¯­è¨€æ–‡ä»¶å¤¹åä¸€è‡´ã€‚å³ .lproj å‰çš„åç§°ã€‚</p>

<p><img src="/_img/20190801/name.png" alt="name.png" /></p>

<p>è¿™æ ·å°±å¯ä»¥ä¿®æ”¹ app å†…è¯­è¨€äº†ã€‚ä½†æ˜¯å®ƒåªèƒ½åœ¨ä¸‹ä¸€æ¬¡å¯åŠ¨æ—¶ç”Ÿæ•ˆï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ hook ä»£ç ï¼Œä¿®æ”¹å®ƒã€‚è¯¦æƒ…è¯·è§<a href="https://juejin.im/post/5c130156e51d451d9a74887b">æ˜é‡‘ - iOSå¼€å‘ä¹‹APPå†…éƒ¨åˆ‡æ¢è¯­è¨€</a></p>

<h4 id="å…­storyboard-å’Œ-xib-å›½é™…åŒ–">å…­ã€storyboard å’Œ xib å›½é™…åŒ–</h4>

<p>apple æ”¯æŒåšå›½é™…åŒ–ï¼Œå¾ˆå®¹æ˜“ï¼Œè¯·è‡ªè¡Œæ‰¾æ–‡æ¡£å’Œblogã€‚</p>

<p>ä½†æ˜¯ Launch Screen.storyboard å¯åŠ¨å±å³æ˜¯ä¸æ”¯æŒçš„ã€‚å®˜æ–¹æ–‡æ¡£(Human Interface Guidelines - Launch Screen)é‡Œè¯´</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Avoid including text on your launch screen. Because launch screens are static, any displayed text wonâ€™t be localized.
</code></pre></div></div>

<p><img src="/_img/20190801/launchScreen.png" alt="launchScreen.png" /></p>

<p>å¦‚æœä¸€å®šè¦åšï¼š</p>

<p>plan B å°±æ˜¯ç”¨ <code class="highlighter-rouge">InfoPlist.strings</code>ï¼Œç¼ºç‚¹ä¹Ÿå¦‚åˆšåˆšæè¿°ä¸€æ ·ï¼Œåªèƒ½è·Ÿéšç³»ç»Ÿè¯­è¨€ã€‚</p>

<p>plan C å°±æ˜¯è‡ªå·±ä»£ç å®ç°å¯åŠ¨å±</p>

<p>å½“ç„¶ç æ‰è¿™ä¸ªéœ€æ±‚æ˜¯æœ€æ£’çš„ï¼</p>

<h2 id="nslocale">NSLocale</h2>

<p>å¹¸è¿çš„æ˜¯åœ¨ iOS ç³»ç»Ÿé‡Œï¼ŒNSLocale å°±æ˜¯ä¸“é—¨ä¸ºè¯­è¨€åŒºåŸŸæ€§å·®å¼‚å¤„ç†è€Œå­˜åœ¨çš„ã€‚</p>

<p>æ—¶é—´å’Œæ—¥æœŸ</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>=== åˆå§‹åŒ–
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"zh"];
    
NSDateFormatter *fmt = [[NSDateFormatter alloc] init];
fmt.dateStyle = NSDateFormatterLongStyle;
fmt.locale = locale;

NSLog(@"%@", [fmt stringFromDate:[NSDate date]]);

=== å½“ app è¯­è¨€å˜æ›´æ—¶ï¼Œéœ€è¦æ›´æ–° locale
fmt.locale = newLanguageLocale;

=== å¦‚æœä½¿ç”¨çš„æ˜¯ dateFormatFromTemplate åˆå§‹åŒ–
=== é‚£ä¹ˆè¯­è¨€æ›´æ–°æ—¶ï¼Œè¦åˆ·æ–° dateFormat å’Œ locale
fmt.dateFormat = [NSDateFormatter dateFormatFromTemplate:@"dMMM" options:0 locale:self.locale];
fmt.locale = newLanguageLocale;
// è¾“å‡ºä¸­æ–‡1æœˆ1æ—¥ï¼Œè‹±æ–‡Apr 1
</code></pre></div></div>

<p>æ•°å­—</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"de"];

NSNumberFormatter *fmt = [[NSNumberFormatter alloc] init];
fmt.numberStyle = NSNumberFormatterDecimalStyle;
fmt.locale = locale;

NSLog(@"%@", [fmt stringFromNumber:@(1000.01)]);
</code></pre></div></div>

<h2 id="å•å¤æ•°å¤„ç†strings-file-å’Œ-stringsdict-file">å•å¤æ•°å¤„ç†(Strings File å’Œ Stringsdict File)</h2>

<p>Stringsdict æ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†å•å¤æ•°çš„ã€‚</p>

<p>æ¯”å¦‚æˆ‘åœ¨ Strings File é‡Œå®šä¹‰äº†ä¸€ä¸ª key</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>è‹±æ–‡
"lg_days" = "%ld days"

ä¸­æ–‡
"lg_days" = "%ldå¤©"
</code></pre></div></div>

<p>å¯¹äºè‹±æ–‡ä½¿ç”¨è€…ï¼Œæœ‰ã€Œ1 dayã€ å’Œã€Œ2 daysã€çš„å·®åˆ«ã€‚</p>

<p>è¿™é‡Œæœ‰2ç§å¤„ç†æ–¹å¼</p>

<p>ä½ å¯ä»¥æŠŠ <code class="highlighter-rouge">"%ld days"</code> å†™æˆ <code class="highlighter-rouge">%ld day(s)</code></p>

<p>æˆ–è€…ä½¿ç”¨ <code class="highlighter-rouge">Stringsdict</code>ã€‚</p>

<p>å°† Stringsdict çš„æ–‡ä»¶åå‘½åä¸ Strings ä¸€è‡´ã€‚åœ¨è‹±æ–‡å’Œä¸­æ–‡çš„ Stringsdict å¡«å†™å¦‚ä¸‹</p>

<p>èƒ½å‘ç°ï¼Œè‹±æ–‡éœ€è¦å¤„ç† zeroã€oneã€other çš„æƒ…å†µï¼Œä¸­æ–‡åªéœ€è¦å¤„ç† zeroã€other çš„æƒ…å†µã€‚</p>

<p>ä¸è¿‡ï¼Œå¦‚æœå’Œ Android ä¸€èµ·å¼€å‘å…±åŒç®¡ç† keyï¼Œå¯èƒ½éœ€è¦æŠŠ zero å•ç‹¬æ‹¿å‡ºæ¥ä¸åœ¨æ­¤å¤„å¤„ç†ã€‚å› ä¸ºå®‰å“ç³»ç»Ÿå°†è‹±è¯­ä½¿ç”¨è€…çš„ zero æ— æ•ˆåŒ–ï¼Œä¸äºˆå¤„ç†ï¼Œå³å®‰å“åªä¼šå¤„ç† one å’Œ otherã€‚</p>

<p>è‹±æ–‡</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;plist version="1.0"&gt;
&lt;dict&gt;
	&lt;key&gt;lg_days&lt;/key&gt;
	&lt;dict&gt;
		&lt;key&gt;NSStringLocalizedFormatKey&lt;/key&gt;
		&lt;string&gt;%#@VARIABLE@&lt;/string&gt;
		&lt;key&gt;VARIABLE&lt;/key&gt;
		&lt;dict&gt;
			&lt;key&gt;NSStringFormatSpecTypeKey&lt;/key&gt;
			&lt;string&gt;NSStringPluralRuleType&lt;/string&gt;
			&lt;key&gt;NSStringFormatValueTypeKey&lt;/key&gt;
			&lt;string&gt;ld&lt;/string&gt;
			&lt;key&gt;zero&lt;/key&gt;
			&lt;string&gt;none&lt;/string&gt;
			&lt;key&gt;one&lt;/key&gt;
			&lt;string&gt;1 day&lt;/string&gt;
			&lt;key&gt;other&lt;/key&gt;
			&lt;string&gt;%ld days&lt;/string&gt;
		&lt;/dict&gt;
	&lt;/dict&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</code></pre></div></div>

<p>ä¸­æ–‡</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;plist version="1.0"&gt;
&lt;dict&gt;
	&lt;key&gt;lg_days&lt;/key&gt;
	&lt;dict&gt;
		&lt;key&gt;NSStringLocalizedFormatKey&lt;/key&gt;
		&lt;string&gt;%#@VARIABLE@&lt;/string&gt;
		&lt;key&gt;VARIABLE&lt;/key&gt;
		&lt;dict&gt;
			&lt;key&gt;NSStringFormatSpecTypeKey&lt;/key&gt;
			&lt;string&gt;NSStringPluralRuleType&lt;/string&gt;
			&lt;key&gt;NSStringFormatValueTypeKey&lt;/key&gt;
			&lt;string&gt;ld&lt;/string&gt;
			&lt;key&gt;zero&lt;/key&gt;
			&lt;string&gt;å½“å¤©&lt;/string&gt;
			&lt;key&gt;other&lt;/key&gt;
			&lt;string&gt;%ldå¤©&lt;/string&gt;
		&lt;/dict&gt;
	&lt;/dict&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</code></pre></div></div>

<p>åœ¨ Xcode é‡Œæ‰“å¼€å³æ˜¯è¿™æ ·</p>

<p><img src="/_img/20190801/stringsdict.png" alt="stringsdict.png" /></p>

<p>1 å³ä¸º strings æ–‡ä»¶é‡Œçš„ key</p>

<p>2 VARIABLE å¯ä»¥æ¢åï¼Œè‡ªå®šä¹‰éœ€è¦æ›¿æ¢çš„å­—ç¬¦ï¼Œæ ¼å¼ä¸º <code class="highlighter-rouge">%#@è‡ªå®šä¹‰key@</code></p>

<p>3 å³2çš„å®šä¹‰çš„é‚£ä¸ªkey</p>

<p>4 å±‚çº§å’Œ lg_days ç›¸åŒï¼Œæ˜¯å¦å¤–ä¸€ä¸ª key</p>

<h3 id="stringsdictçš„ä¸€ä¸ªç³»ç»Ÿå‘">stringsdictçš„ä¸€ä¸ªç³»ç»Ÿå‘</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NSString *str1 = [NSString localizedStringWithFormat:NSLocalizedString(@"lg_days", nil), 1];
NSString *str2 = [NSString localizedStringWithFormat:NSLocalizedString(@"lg_days", nil), 2];
NSLog(@"%@, %@", str1, str2);
</code></pre></div></div>

<p>ä¸Šé¢è¿™æ®µï¼Œæˆ‘çš„ç›®æ ‡è¾“å‡ºæ˜¯ 1 day å’Œ 2 daysã€‚</p>

<p>ä½†è¿™é‡Œä¼šé‡åˆ°ä¸€ä¸ªå‘ã€‚</p>

<p>ç”¨æ¨¡æ‹Ÿå™¨ï¼ˆè‹±æ–‡ï¼‰æµ‹è¯•å‘ç°å®Œå…¨æ²¡é—®é¢˜ï¼Œä½†æ˜¯çœŸæœºä½¿ç”¨çš„ä¸­æ–‡ç³»ç»Ÿæµ‹è¯•å´å¾—åˆ° 1 daysã€‚</p>

<p>æœ€åå‘ç°åŸæ¥ stringsdict æ˜¯å’Œ <code class="highlighter-rouge">NSLocale currentLocale</code> è”åŠ¨çš„ï¼Œå¹¶ä¸æ˜¯<code class="highlighter-rouge">AppleLanguages</code>ã€‚å› ä¸ºä¸­æ–‡åªå¤„ç†zero å’Œ otherï¼Œæ‰€ä»¥å¯¹äºä½¿ç”¨ä¸­æ–‡ç³»ç»Ÿçš„äººæ¥è¯´ 1 èµ° other æµç¨‹ã€‚</p>

<p>æˆ‘ä»¬éœ€è¦å¯¹ NSString ä½¿ç”¨ localeï¼Œä½¿ç”¨ä½  app å†…è¯­è¨€ç›¸å…³çš„ localeã€‚ ä¾‹å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en"];

NSString *format = NSLocalizedString(@"lg_days", nil);
NSString s = [[NSString alloc] initWithFormat:format locale:locale, 1];
</code></pre></div></div>

<h2 id="å®æˆ˜ä¼˜åŒ–">å®æˆ˜ä¼˜åŒ–</h2>

<h4 id="ä¸€ç¼“å­˜formatter">ä¸€ã€ç¼“å­˜Formatter</h4>

<p>æ— è®º NSDateFormatter è¿˜æ˜¯ NSNumberFormatter éƒ½æ˜¯ç‰¹åˆ«æŸè€—æ€§èƒ½çš„ï¼ŒApple è‡ªå·±ä¹Ÿå»ºè®®ä½¿ç”¨å•ä¾‹æ¥ç®¡ç†ç¼“å­˜å¯¹è±¡ã€‚</p>

<p><img src="/_img/20190801/cache.png" alt="cache.png" /></p>

<h4 id="äºŒui-åˆ·æ–°é—®é¢˜">äºŒã€UI åˆ·æ–°é—®é¢˜</h4>

<p>å½“è¯­è¨€å˜åŒ–æ—¶ï¼Œæ”¶åˆ°é€šçŸ¥çš„éæ´»è·ƒçš„ UI æœ€å¥½åšå»¶è¿Ÿåˆ·æ–°ã€‚</p>

<p>ä¸€æ˜¯ä¸ºäº†é¿å…è¯­è¨€åˆ‡æ¢æ—¶ï¼Œå¤§æ•°é‡çš„ cpu æš´æ¶¨ã€‚äºŒæ˜¯å­˜åœ¨åˆ·æ–°å…ˆåé¡ºåºçš„å†²çªã€‚</p>

<p>æ¯”å¦‚ï¼Œä½ çš„ä¸€ä¸ªé¡µé¢ç”¨åˆ°äº†ç¼“å­˜çš„ NSDateFormatterï¼Œä½ å¿…é¡»è¦ä¿è¯ NSDateFormatter è¿™ä¸ªå®ä¾‹æ˜¯æœ€å…ˆåˆ·æ–°ï¼Œæ‹¿åˆ°çš„ string æ‰æ˜¯å¯¹åº”è¯­è¨€çš„ã€‚æ‰€ä»¥éå­˜æ´»é¡µé¢çš„ UI ä¸èƒ½æŠ¢åˆ·æ–°ã€‚</p>

<h2 id="æµ‹è¯•å·¥å…·">æµ‹è¯•å·¥å…·</h2>

<p>Xcode æä¾›äº†ä¸€äº›å›½é™…åŒ–æµ‹è¯•çš„é€‰é¡¹ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Double-Length Pseudolanguage æ˜¯æŠŠä½ çš„å›½é™…åŒ–æ–‡å­—åŠ é•¿åˆ°2å€ï¼Œä»¥æµ‹è¯•å¸ƒå±€æ˜¯å¦è¿˜æ­£ç¡®ã€‚
Right-to-Left Pseudolanguage å°±æ˜¯ç±»ä¼¼é˜¿æ‹‰ä¼¯è¯­ä½¿ç”¨è€…çš„å·¦å³ç›¸å
Accented Pseudolanguage æ˜¯å¸¦éŸ³è°ƒçš„è¯­è¨€ï¼Œå¦‚æœå›ºå®šé«˜åº¦çš„ label å¯èƒ½ä¼šå‡ºç°æ˜¾ç¤ºä¸å…¨çš„é—®é¢˜ã€‚
Bounded String Pseudolanguage æ˜¯ç»™æ‰€æœ‰çš„è¯­è¨€åŠ ä¸ªä¸­æ‹¬å·
Right-to-Left Pseudolanguage with Right-to-Left String æ˜¯åœ¨ç¬¬2ç§æƒ…å†µä¸‹æ–‡å­—ä¹Ÿåå‘ã€‚
</code></pre></div></div>

<p><img src="/_img/20190801/testXcode.png" alt="testXcode.png" /></p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a href="https://objccn.io/issue-9-3/">ObjC ä¸­å›½ - å­—ç¬¦ä¸²æœ¬åœ°åŒ–</a></p>

<p><a href="https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/launch-screen/">Apple Human Interface Guidelines - Launch Screen</a></p>

<p><a href="http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html">UNICODE LOCALE DATA MARKUP LANGUAGE(æ—¥æœŸå›½é™…åŒ–)</a></p>

<p><a href="http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html">Language Plural Rules(è¯­è¨€å•å¤æ•°)</a></p>

<p><a href="https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPInternational/StringsdictFileFormat/StringsdictFileFormat.html">Apple - Stringsdict File Format</a></p>

<p><a href="https://www.jianshu.com/p/f191e4c8a299">æ ¼å¼åŒ–æ˜¾ç¤ºæ—¥æœŸ/æ—¶é—´çš„ä¸€ç‚¹æ€»ç»“
</a></p>

<p><a href="https://forums.developer.apple.com/thread/26051">Why locale affects plural rules in iOS 9?</a></p>

<p><a href="https://juejin.im/post/5b90ea53e51d450ea131ef81">æ˜é‡‘ - iOSè¯­è¨€å›½é™…åŒ–/æœ¬åœ°åŒ–-å®è·µæ€»ç»“</a></p>


      <footer class="site-footer">
        <span class="site-footer-credits">This page was generated by <a href="/">Feierbn</a> with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/pages-themes/cayman">Cayman theme</a>.</span>
      </footer>
    </main>
  </body>
</html>
