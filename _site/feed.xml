<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>PengElement</title>
		<description>Stylish Jekyll Theme</description>
		<link>/</link>
		<atom:link href="/feed.xml" rel="self" type="application/rss+xml" />
		
			<item>
				<title>将文件隐藏在图片里</title>
				<description>&lt;h2 id=&quot;目标&quot;&gt;目标&lt;/h2&gt;
&lt;p&gt;我有一个文件，比如叫test.mp3，想把它隐藏到一张叫test.png的图片里。&lt;/p&gt;
&lt;h2 id=&quot;环境&quot;&gt;环境&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Mac OSX 10.12.4&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;工具&quot;&gt;工具&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Mac Terminal&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;命令&quot;&gt;命令&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;zip、unzip&lt;/li&gt;
  &lt;li&gt;cat&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;压缩&quot;&gt;压缩&lt;/h2&gt;

&lt;p&gt;压缩test.mp3&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;zip output.zip test.mp3
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;如果需要加密，可以带上-P命令。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;zip -P 123456 output.zip test.mp3
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;将压缩包写入图片&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cat test.png output.zip &amp;gt; final.png
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;这样就得到了最终的图片了，正常是看不到里面的数据的。&lt;/p&gt;

&lt;h2 id=&quot;解压&quot;&gt;解压&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;unzip final.png 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
				<pubDate>Tue, 08 Aug 2017 00:00:00 +0800</pubDate>
				<link>/%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7/2017/08/08/%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%E9%9A%90%E8%97%8F.html</link>
				<guid isPermaLink="true">/%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7/2017/08/08/%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%E9%9A%90%E8%97%8F.html</guid>
			</item>
		
			<item>
				<title>完全小白ssh安全优化</title>
				<description>&lt;p&gt;前几天买了个vps服务，于是玩了一把,对ssh的安全进行优化。&lt;/p&gt;

&lt;p&gt;完全业余，仅供参考。&lt;/p&gt;

&lt;h2 id=&quot;环境&quot;&gt;环境&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Mac OSX (终端操作)10.12.4 bash&lt;/li&gt;
  &lt;li&gt;bash&lt;/li&gt;
  &lt;li&gt;搬瓦工VPS Centos 6 x86 bbr&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;目标&quot;&gt;目标&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;建立普通用户权限的账户，登录后再切换为root&lt;/li&gt;
  &lt;li&gt;禁用root的ssh登录权限&lt;/li&gt;
  &lt;li&gt;使用rsa公钥免密登录&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;必备vi命令&quot;&gt;必备：vi命令&lt;/h2&gt;
&lt;p&gt;自行google，操作熟练后再去远程操作。&lt;/p&gt;

&lt;p&gt;esc后，shift+:后，输入wq是保存退出，q!是不保存退出。&lt;/p&gt;

&lt;h2 id=&quot;第一次登录ssh&quot;&gt;第一次登录ssh&lt;/h2&gt;
&lt;p&gt;打开Mac的终端(Terminal), 输入&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ssh root@ip地址 -p 端口号
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;出现：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;The authenticity of host '[ip地址]:端口号 ([ip地址]:端口号)' can't be established.
RSA key fingerprint is SHA256:bFmpDOKQD0LH6vQYToaLgw3OjelyPHtXw6ZfN4b5XO0.
Are you sure you want to continue connecting (yes/no)? 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;填yes&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Warning: Permanently added '[ip地址]:端口号' (RSA) to the list of known hosts.
Last login: Thu Aug  3 23:31:17 2017 from 本机ip地址
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;这时候会在本地的&lt;code class=&quot;highlighter-rouge&quot;&gt;~/.ssh/known_hosts&lt;/code&gt;添加了刚刚的key，删除下次还会出现新建fingerprint的请求。&lt;/p&gt;

&lt;p&gt;操作完之后，我们就登录到远程的ssh上了。&lt;/p&gt;

&lt;h2 id=&quot;修改登录端口和root密码&quot;&gt;修改登录端口和root密码&lt;/h2&gt;
&lt;p&gt;买了vps之后，服务商会把临时的密码和ssh端口号通过邮件发送给你。
在kiwiVM Control Panel的Main controls的SSH Port项也可以看到同样的端口号和ip地址。&lt;/p&gt;

&lt;p&gt;我们需要修改一下端口号，以root的身份登录ssh之后&lt;/p&gt;

&lt;p&gt;更改密码:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;passwd root
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;修改端口号:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vi /etc/ssh/sshd_config
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;找到最后一句，这里的端口号就是服务商邮件发给你的那个了:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Port 端口号
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;修改完保存之后，重启sshd服务:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;service sshd restart
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;修改后回wikiVM能看到端口修改了,下次登录也只能用这个端口了。&lt;/p&gt;

&lt;h2 id=&quot;新建用户&quot;&gt;新建用户&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;useradd -m 用户名
passwd 用户名
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;useradd是添加一个用户，-m是添加相关的home目录&lt;/p&gt;

&lt;p&gt;passwd是为用户名改密码&lt;/p&gt;

&lt;p&gt;做完之后，系统会在/home下建立一个用户名的目录。&lt;/p&gt;

&lt;h2 id=&quot;切换用户&quot;&gt;切换用户&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;su 用户名
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;输入密码就能切换到指定的用户了。&lt;/p&gt;

&lt;p&gt;所以当我们用自建的用户名登录后&lt;code class=&quot;highlighter-rouge&quot;&gt;su root&lt;/code&gt;就能切换回root账户了。&lt;/p&gt;

&lt;h2 id=&quot;禁用root登录&quot;&gt;禁用root登录&lt;/h2&gt;
&lt;p&gt;登录后，以root身份操作:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vi /etc/ssh/sshd_config
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;找到倒数第二句，改为no：&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;PermitRootLogin yes&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;wq保存，重启sshd服务（命令以上面）。&lt;/p&gt;

&lt;p&gt;&lt;mark&gt;当前已登录的账户不会强制退出，下次登录才生效。&lt;/mark&gt;&lt;/p&gt;

&lt;h2 id=&quot;制作免密登录&quot;&gt;制作免密登录&lt;/h2&gt;
&lt;h3 id=&quot;生成密钥&quot;&gt;生成密钥&lt;/h3&gt;
&lt;p&gt;在Mac本地的terminal输入&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd ~/.ssh
ssh-keygen -t rsa -C “备注随便填”
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;会出现&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Generating public/private rsa key pair.
Enter file in which to save the key (/Users/pengyj/.ssh/id_rsa): 【直接回车】
Enter passphrase (empty for no passphrase): 【直接回车,设置空密码】
Enter same passphrase again: 【再次直接回车,确认设置空密码】
Your identification has been saved in /Users/pengyj/.ssh/id_rsa.
Your public key has been saved in /Users/pengyj/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:GeNbn307rRFeUIQ0D38+/AId4Tb2iGF7uLCa+w4qNxw “abc”
The key's randomart image is:
+---[RSA 2048]----+
|             .=oo|
|             ..B |
|        o   o B +|
|       . + . O.B.|
|        S o = =o+|
|      E  o + B oo|
|     . .o . + = +|
|    . +. +     =o|
|     o..++o   .o.|
+----[SHA256]-----+

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;操作完之后，在本机的~/.ssh/下，会出现以rsa加密的公钥&lt;code class=&quot;highlighter-rouge&quot;&gt;id_rsa.pub&lt;/code&gt;和私钥&lt;code class=&quot;highlighter-rouge&quot;&gt;id_rsa&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;导入到服务器&quot;&gt;导入到服务器&lt;/h3&gt;
&lt;p&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;ssh-copy-id&lt;/code&gt;命令，将公钥导入到服务器。&lt;/p&gt;

&lt;p&gt;在Mac本机Terminal操作，刚刚的~/.ssh 目录下：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ssh-copy-id -i id_rsa.pub 用户名@ip地址 -p 端口号
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;上传成功后，后在服务器的用户名目录&lt;code class=&quot;highlighter-rouge&quot;&gt;~/.ssh/&lt;/code&gt;下有一个&lt;code class=&quot;highlighter-rouge&quot;&gt;authorized_keys&lt;/code&gt;文件。&lt;/p&gt;

&lt;p&gt;在服务器端做修改权限（我一步我没确认过，因为我一开始就做了）：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;切换回root用户，或者具有root权限的用户。把以下3句注释去掉，变为:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vi /etc/ssh/sshd_config
RSAAuthentication yes
PubkeyAuthentication yes
AuthorizedKeysFile	.ssh/authorized_keys
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;重启sshd服务。&lt;/p&gt;

&lt;p&gt;至此，我们已经可以免密登录了。&lt;/p&gt;

&lt;p&gt;在本机测试，登录，确认不用密码了后，去服务器更改关闭密码登录。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vi /etc/ssh/sshd_config
PasswordAuthentication yes
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;优化本机登录&quot;&gt;优化本机登录&lt;/h2&gt;
&lt;p&gt;每次在本机登录ssh，都要输入一长串的文字，于是我们优化一下，加个alias:&lt;/p&gt;

&lt;p&gt;bash下：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vi ~/.bash_profile
alias openvps=&quot;ssh 用户名@ip地址 -p 端口号&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;保存重新载入&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;source ~/.bash_profile
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;这样我们就可以直接在本机的Terminal输入openvps就能登录到ssh了。&lt;/p&gt;

&lt;h2 id=&quot;保存好你的私钥&quot;&gt;保存好你的私钥&lt;/h2&gt;
&lt;p&gt;完！&lt;/p&gt;

&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/tianlesoftware/article/details/6201898&quot;&gt;Dave: Linux 修改SSH端口 和 禁止Root远程登陆&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://teddysun.com/237.html&quot;&gt;秋水逸冰: SSH无密码登录及putty设置&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/13919b5ba8a2&quot;&gt;素白流殇: ssh-keygen和ssh-copy-id实现SSH无密钥登陆&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/ecc744c79d2f&quot;&gt;简文：Mac 与服务器 ssh 无密码登录&lt;/a&gt;&lt;/p&gt;
</description>
				<pubDate>Tue, 08 Aug 2017 00:00:00 +0800</pubDate>
				<link>/vps/2017/08/08/ssh%E5%AE%89%E5%85%A8%E7%9B%B8%E5%85%B3.html</link>
				<guid isPermaLink="true">/vps/2017/08/08/ssh%E5%AE%89%E5%85%A8%E7%9B%B8%E5%85%B3.html</guid>
			</item>
		
	</channel>
</rss>
